"""
Алгоритм сортировки пузырьком (Bubble Sort)
--------------------------------------------
Принцип: на каждом проходе «всплывает» наибольший элемент —
соседние пары сравниваются и меняются местами, если стоят
в неправильном порядке. Повторяем до полной сортировки.

Временна́я сложность:
  Лучший случай  — O(n)    (список уже отсортирован, флаг оптимизации)
  Средний случай — O(n²)
  Худший случай  — O(n²)

Пространственная сложность: O(1)
"""


def bubble_sort(lst: list) -> list:
    """
    Сортировка пузырьком.

    Принимает список, возвращает новый отсортированный список.
    Исходный список не изменяется.
    """
    arr = lst.copy()       # Работаем с копией, чтобы не менять оригинал
    n = len(arr)

    for i in range(n):
        # После i-го прохода последние i элементов уже на своих местах
        swapped = False    # Флаг: были ли обмены на этом проходе

        for j in range(n - i - 1):
            # Сравниваем соседние элементы
            if arr[j] > arr[j + 1]:
                # Меняем местами — «пузырёк» всплывает вправо
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
                swapped = True

        # Если обменов не было — список уже отсортирован, выходим досрочно
        if not swapped:
            break

    return arr


# ---------------------------------------------------------------------------
# Демонстрация
# ---------------------------------------------------------------------------
if __name__ == "__main__":
    sample = [64, 34, 25, 12, 22, 11, 90]
    print(f"Исходный список:      {sample}")
    print(f"Отсортированный список: {bubble_sort(sample)}")
