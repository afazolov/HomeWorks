"""
K3 — Рекурсивный бинарный поиск
---------------------------------
Принцип: на каждом вызове сравниваем target со средним элементом
текущего отрезка [left, right]. Если совпало — возвращаем индекс.
Если target меньше — рекурсивно ищем в левой половине,
если больше — в правой. Если отрезок пуст — возвращаем -1.

Временна́я сложность:       O(log n)
Пространственная сложность: O(log n)  ← стек вызовов глубиной log n
"""


def binary_search(lst: list, target, left: int = 0, right: int = None) -> int:
    """
    Рекурсивный бинарный поиск элемента target в отсортированном списке lst.

    Параметры:
        lst    — отсортированный список
        target — искомый элемент
        left   — левая граница текущего отрезка (по умолчанию 0)
        right  — правая граница текущего отрезка (по умолчанию len-1)

    Возвращает:
        индекс target в списке, или -1 если элемент не найден
    """
    # Инициализируем правую границу при первом вызове
    if right is None:
        right = len(lst) - 1

    # Базовый случай: отрезок пуст — элемент не найден
    if left > right:
        return -1

    # Находим середину текущего отрезка
    mid = (left + right) // 2

    if lst[mid] == target:
        # Нашли элемент — возвращаем его индекс
        return mid
    elif lst[mid] < target:
        # target больше среднего — ищем в правой половине
        return binary_search(lst, target, mid + 1, right)
    else:
        # target меньше среднего — ищем в левой половине
        return binary_search(lst, target, left, mid - 1)


# ---------------------------------------------------------------------------
# Демонстрация
# ---------------------------------------------------------------------------
if __name__ == "__main__":
    # Список обязательно должен быть отсортирован!
    data = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
    print(f"Список: {data}\n")

    for target in [7, 1, 19, 6, 20]:
        idx = binary_search(data, target)
        if idx != -1:
            print(f"Элемент {target:>3} найден по индексу {idx}")
        else:
            print(f"Элемент {target:>3} не найден (возвращено -1)")
